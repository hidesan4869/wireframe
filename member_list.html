<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‰ºöÂì°‰∏ÄË¶ß - ‰∏çÂãïÁî£„Éù„Éº„Çø„É´ÁÆ°ÁêÜÁîªÈù¢</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f9f9f9;
            color: #2c2c2c;
        }

        .container {
            display: flex;
            height: 100vh;
        }

        /* „Éò„ÉÉ„ÉÄ„Éº */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: #2c2c2c;
            color: white;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-bottom: 1px solid #e0e0e0;
        }

        .header h1 {
            font-size: 20px;
            font-weight: 600;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        /* „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ */
        .main-content {
            flex: 1;
            margin-top: 60px;
            padding: 30px;
            overflow-y: auto;
            max-width: 1400px;
            margin-left: auto;
            margin-right: auto;
        }

        .breadcrumb {
            background: white;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            border: 1px solid #e0e0e0;
            font-size: 14px;
            color: #6a6a6a;
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .page-title {
            font-size: 28px;
            font-weight: 600;
            color: #2c2c2c;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: #4a4a4a;
            color: white;
        }

        .btn-primary:hover {
            background: #3a3a3a;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: #8a8a8a;
            color: white;
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 12px;
        }

        /* „Ç¢„ÇØ„Ç∑„Éß„É≥„É°„Éã„É•„Éº */
        .action-menu {
            position: relative;
            display: inline-block;
        }

        .action-button {
            background: #4a4a4a;
            color: white;
            border: none;
            border-radius: 50%;
            width: 32px;
            height: 32px;
            cursor: pointer;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
        }

        .action-button:hover {
            background: #3a3a3a;
            transform: scale(1.1);
        }

        .action-popover {
            position: absolute;
            top: 40px;
            right: 0;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            padding: 8px 0;
            min-width: 150px;
            z-index: 1000;
            display: none;
        }

        .action-popover.show {
            display: block;
        }

        .action-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            cursor: pointer;
            font-size: 14px;
            color: #2c2c2c;
            transition: background 0.2s ease;
        }

        .action-item:hover {
            background: #f5f5f5;
        }

        .action-item-icon {
            font-size: 16px;
            width: 18px;
            text-align: center;
        }

        /* „Ç¢„ÇØ„Ç∑„Éß„É≥„Ç¢„Ç§„ÉÜ„É†„ÅÆËâ≤ÂàÜ„Åë */
        .action-item.detail:hover {
            background: #e3f2fd;
            color: #1976d2;
        }

        .action-item.edit:hover {
            background: #fff3e0;
            color: #f57c00;
        }

        .action-item.delete:hover {
            background: #ffebee;
            color: #d32f2f;
        }

        .action-item.mail:hover {
            background: #e8f5e8;
            color: #2e7d32;
        }

        /* „É¢„Éº„ÉÄ„É´ */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
        }

        .modal.show {
            display: block;
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            background: #2c2c2c;
            color: white;
            padding: 20px 25px;
            border-radius: 12px 12px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 600;
        }

        .close {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }

        .modal-body {
            padding: 25px;
        }

        /* „Éï„Ç©„Éº„É†„Çπ„Çø„Ç§„É´ */
        .form-section {
            margin-bottom: 30px;
        }

        .section-title {
            font-size: 16px;
            font-weight: 600;
            color: #2c2c2c;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group.full-width {
            grid-column: span 2;
        }

        .form-label {
            font-size: 13px;
            color: #4a4a4a;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .required {
            color: #e74c3c;
            font-weight: bold;
        }

        .form-input {
            padding: 10px 12px;
            border: 1px solid #c0c0c0;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.2s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #4a4a4a;
        }

        .form-input[readonly] {
            background: #f0f0f0;
            cursor: not-allowed;
        }

        textarea.form-input {
            resize: vertical;
            min-height: 120px;
            font-family: inherit;
        }

        .form-actions {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }

        /* Áµ±Ë®à„Ç´„Éº„Éâ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: white;
            padding: 25px;
            border-radius: 12px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid #e0e0e0;
            transition: transform 0.2s ease;
        }

        .stat-card:hover {
            transform: translateY(-2px);
        }

        .stat-number {
            font-size: 32px;
            font-weight: 700;
            color: #4a4a4a;
            margin-bottom: 5px;
        }

        .stat-label {
            color: #7a7a7a;
            font-size: 14px;
        }

        /* „Éï„Ç£„É´„Çø„Éº */
        .filter-section {
            background: white;
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid #e0e0e0;
        }

        .filter-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
        }

        .filter-label {
            font-size: 12px;
            color: #6a6a6a;
            margin-bottom: 5px;
        }

        .filter-input {
            padding: 8px 12px;
            border: 1px solid #c0c0c0;
            border-radius: 6px;
            font-size: 14px;
        }

        .filter-select {
            padding: 8px 12px;
            border: 1px solid #c0c0c0;
            border-radius: 6px;
            font-size: 14px;
        }

        .search-controls {
            display: flex;
            gap: 10px;
            align-items: end;
        }

        /* „ÉÜ„Éº„Éñ„É´ */
        .data-table {
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid #e0e0e0;
        }

        .table-header {
            padding: 20px 25px;
            background: #f5f5f5;
            border-bottom: 1px solid #d0d0d0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .table-title {
            font-size: 18px;
            font-weight: 600;
            color: #4a4a4a;
        }

        table {
            width: 100%;
            border-collapse: collapse;
        }

        thead th {
            background: #f5f5f5;
            padding: 15px;
            text-align: left;
            font-weight: 600;
            color: #4a4a4a;
            border-bottom: 2px solid #d0d0d0;
            font-size: 14px;
        }

        tbody td {
            padding: 15px;
            border-bottom: 1px solid #e8e8e8;
            font-size: 14px;
        }

        tbody tr:hover {
            background: #f9f9f9;
        }

        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .status-active {
            background: #e5e5e5;
            color: #4a4a4a;
        }

        .status-inactive {
            background: #f0f0f0;
            color: #7a7a7a;
        }

        .status-premium {
            background: #e8e8e8;
            color: #2c2c2c;
        }

        .checkbox-cell {
            width: 40px;
        }

        .table-actions {
            display: flex;
            gap: 10px;
        }

        .bulk-actions {
            display: flex;
            gap: 10px;
            align-items: center;
            padding: 15px 25px;
            background: #fafafa;
            border-top: 1px solid #d0d0d0;
        }

        .selected-count {
            color: #6a6a6a;
            font-size: 14px;
        }

        /* „É¢„Éº„ÉÄ„É´ */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            animation: fadeIn 0.3s ease;
        }

        .modal.show {
            display: block;
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            animation: slideUp 0.3s ease;
        }

        .modal-header {
            background: #2c2c2c;
            color: white;
            padding: 20px 25px;
            border-radius: 12px 12px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 600;
            margin: 0;
        }

        .close {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }

        .modal-body {
            padding: 25px;
            max-height: 60vh;
            overflow-y: auto;
        }

        .detail-grid {
            display: grid;
            grid-template-columns: 150px 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .detail-label {
            font-weight: 600;
            color: #6a6a6a;
        }

        .detail-value {
            color: #2c2c2c;
        }

        .modal-footer {
            padding: 20px 25px;
            border-top: 1px solid #d0d0d0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .member-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #e0e0e0;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            color: #6a6a6a;
        }

        .activity-log {
            background: #f8f8f8;
            border-radius: 6px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .activity-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .activity-item:last-child {
            border-bottom: none;
        }

        .activity-desc {
            color: #4a4a4a;
        }

        .activity-time {
            color: #7a7a7a;
            font-size: 12px;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes slideUp {
            from {
                transform: translateY(50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        /* „Çø„Éñ„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ */
        .tab-nav {
            display: flex;
            gap: 20px;
            border-bottom: 2px solid #e0e0e0;
            margin-bottom: 20px;
        }

        .tab-item {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.2s ease;
            color: #6a6a6a;
        }

        .tab-item:hover {
            color: #4a4a4a;
        }

        .tab-item.active {
            color: #2c2c2c;
            border-bottom-color: #4a4a4a;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- „Éò„ÉÉ„ÉÄ„Éº -->
        <header class="header">
            <h1 style="cursor: pointer;" onclick="window.location.href='index.html'">üè† ‰∏çÂãïÁî£„Éù„Éº„Çø„É´ÁÆ°ÁêÜ„Ç∑„Çπ„ÉÜ„É†</h1>
            <div class="user-info">
                <span>Áî∞‰∏≠ Â§™ÈÉé„Åï„Çì</span>
                <button class="btn btn-secondary">„É≠„Ç∞„Ç¢„Ç¶„Éà</button>
            </div>
        </header>

        <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
        <main class="main-content">
            <div class="breadcrumb">
                <a href="index.html" style="color: #6a6a6a; text-decoration: none;">„Éõ„Éº„É†</a> > ‰ºöÂì°ÁÆ°ÁêÜ > ‰ºöÂì°‰∏ÄË¶ß
            </div>

            <div class="page-header">
                <h2 class="page-title">üë• ‰ºöÂì°‰∏ÄË¶ß</h2>
                <div class="action-buttons">
                    <button class="btn btn-secondary" onclick="exportMembers()">CSV„Ç®„ÇØ„Çπ„Éù„Éº„Éà</button>
                    <button class="btn btn-primary" onclick="window.location.href='member_register.html'">Êñ∞Ë¶è‰ºöÂì°ÁôªÈå≤</button>
                </div>
            </div>

            <!-- „Éï„Ç£„É´„Çø„Éº -->
            <div class="filter-section">
                <div class="filter-row">
                    <div class="filter-group">
                        <label class="filter-label">‰ºöÂì°„Çπ„ÉÜ„Éº„Çø„Çπ</label>
                        <select class="filter-select" id="statusFilter" onchange="filterTable()">
                            <option value="">ÂÖ®„Å¶</option>
                            <option value="active">„Ç¢„ÇØ„ÉÜ„Ç£„Éñ</option>
                            <option value="inactive">ÈÄÄ‰ºö</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">ÁôªÈå≤ÊúüÈñì</label>
                        <select class="filter-select" id="periodFilter" onchange="filterTable()">
                            <option value="">ÂÖ®ÊúüÈñì</option>
                            <option value="today">‰ªäÊó•</option>
                            <option value="week">‰ªäÈÄ±</option>
                            <option value="month">‰ªäÊúà</option>
                            <option value="3months">ÈÅéÂéª3„É∂Êúà</option>
                            <option value="year">ÈÅéÂéª1Âπ¥</option>
                        </select>
                    </div>
                </div>
                <div class="filter-row">
                    <div class="filter-group" style="grid-column: span 3;">
                        <label class="filter-label">„Ç≠„Éº„ÉØ„Éº„ÉâÊ§úÁ¥¢</label>
                        <input type="text" class="filter-input" id="searchBox" placeholder="Ê∞èÂêç„ÄÅ„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ„ÄÅÈõªË©±Áï™Âè∑„ÅßÊ§úÁ¥¢..." onkeyup="searchMembers()">
                    </div>
                    <div class="search-controls">
                        <button class="btn btn-secondary" onclick="clearFilters()">„Éï„Ç£„É´„Çø„Éº„ÇØ„É™„Ç¢</button>
                        <button class="btn btn-primary" onclick="applyFilters()">Ê§úÁ¥¢</button>
                    </div>
                </div>
            </div>

            <!-- „Éá„Éº„Çø„ÉÜ„Éº„Éñ„É´ -->
            <div class="data-table">
                <div class="table-header">
                    <h3 class="table-title">‰ºöÂì°„É™„Çπ„Éà</h3>
                    <div class="table-controls">
                        <span class="selected-count">0‰ª∂ÈÅ∏Êäû‰∏≠</span>
                    </div>
                </div>
                
                <table id="memberTable">
                    <thead>
                        <tr>
                            <th>‰ºöÂì°ID</th>
                            <th>‰ºöÂì°ÊÉÖÂ†±</th>
                            <th>„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ</th>
                            <th>ÈõªË©±Áï™Âè∑</th>
                            <th>„Çπ„ÉÜ„Éº„Çø„Çπ</th>
                            <th>ÁôªÈå≤Êó•</th>
                            <th>Êìç‰Ωú</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>M001234</td>
                            <td>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div>
                                        <div style="font-weight: 600;">Â±±Áî∞ Â§™ÈÉé</div>
                                        <small style="color: #7a7a7a;">„É§„Éû„ÉÄ „Çø„É≠„Ç¶</small>
                                    </div>
                                </div>
                            </td>
                            <td>yamada@example.com</td>
                            <td>090-1234-5678</td>
                            <td><span class="status-badge status-premium">„Ç¢„ÇØ„ÉÜ„Ç£„Éñ</span></td>
                            <td>2024-01-15</td>
                            <td>
                                <div class="action-menu">
                                    <button class="action-button" onclick="toggleActionMenu(this, 'M001234')">‚ãÆ</button>
                                    <div class="action-popover">
                                        <div class="action-item detail" onclick="openDetailPage('M001234')">
                                            <span class="action-item-icon">üëÅÔ∏è</span>
                                            <span>Ë©≥Á¥∞</span>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>M001235</td>
                            <td>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div>
                                        <div style="font-weight: 600;">‰ΩêËó§ Ëä±Â≠ê</div>
                                        <small style="color: #7a7a7a;">„Çµ„Éà„Ç¶ „Éè„Éä„Ç≥</small>
                                    </div>
                                </div>
                            </td>
                            <td>sato@example.com</td>
                            <td>080-9876-5432</td>
                            <td><span class="status-badge status-active">„Ç¢„ÇØ„ÉÜ„Ç£„Éñ</span></td>
                            <td>2024-02-20</td>
                            <td>
                                <div class="action-menu">
                                    <button class="action-button" onclick="toggleActionMenu(this, 'M001235')">‚ãÆ</button>
                                    <div class="action-popover">
                                        <div class="action-item detail" onclick="openDetailPage('M001235')">
                                            <span class="action-item-icon">üëÅÔ∏è</span>
                                            <span>Ë©≥Á¥∞</span>
                                        </div>
                                        <div class="action-item mail" onclick="sendEmail('M001235')">
                                            <span class="action-item-icon">üìß</span>
                                            <span>„É°„Éº„É´ÈÄÅ‰ø°</span>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>M001236</td>
                            <td>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div>
                                        <div style="font-weight: 600;">Èà¥Êú® ‰∏ÄÈÉé</div>
                                        <small style="color: #7a7a7a;">„Çπ„Ç∫„Ç≠ „Ç§„ÉÅ„É≠„Ç¶</small>
                                    </div>
                                </div>
                            </td>
                            <td>suzuki@example.com</td>
                            <td>070-1111-2222</td>
                            <td><span class="status-badge status-active">„Ç¢„ÇØ„ÉÜ„Ç£„Éñ</span></td>
                            <td>2024-03-10</td>
                            <td>
                                <div class="action-menu">
                                    <button class="action-button" onclick="toggleActionMenu(this, 'M001236')">‚ãÆ</button>
                                    <div class="action-popover">
                                        <div class="action-item detail" onclick="openDetailPage('M001236')">
                                            <span class="action-item-icon">üëÅÔ∏è</span>
                                            <span>Ë©≥Á¥∞</span>
                                        </div>
                                        <div class="action-item mail" onclick="sendEmail('M001236')">
                                            <span class="action-item-icon">üìß</span>
                                            <span>„É°„Éº„É´ÈÄÅ‰ø°</span>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>M001237</td>
                            <td>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div>
                                        <div style="font-weight: 600;">Áî∞‰∏≠ ÁæéÂí≤</div>
                                        <small style="color: #7a7a7a;">„Çø„Éä„Ç´ „Éü„Çµ„Ç≠</small>
                                    </div>
                                </div>
                            </td>
                            <td>tanaka@example.com</td>
                            <td>090-3333-4444</td>
                            <td><span class="status-badge status-inactive">ÈÄÄ‰ºö</span></td>
                            <td>2023-12-05</td>
                            <td>
                                <div class="action-menu">
                                    <button class="action-button" onclick="toggleActionMenu(this, 'M001237')">‚ãÆ</button>
                                    <div class="action-popover">
                                        <div class="action-item detail" onclick="openDetailPage('M001237')">
                                            <span class="action-item-icon">üëÅÔ∏è</span>
                                            <span>Ë©≥Á¥∞</span>
                                        </div>
                                        <div class="action-item edit" onclick="openEditModal('M001237')">
                                            <span class="action-item-icon">‚úèÔ∏è</span>
                                            <span>Á∑®ÈõÜ</span>
                                        </div>
                                        <div class="action-item mail" onclick="sendEmail('M001237')">
                                            <span class="action-item-icon">üìß</span>
                                            <span>„É°„Éº„É´ÈÄÅ‰ø°</span>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>M001238</td>
                            <td>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div>
                                        <div style="font-weight: 600;">È´òÊ©ã ÂÅ•Â§™</div>
                                        <small style="color: #7a7a7a;">„Çø„Ç´„Éè„Ç∑ „Ç±„É≥„Çø</small>
                                    </div>
                                </div>
                            </td>
                            <td>takahashi@example.com</td>
                            <td>080-5555-6666</td>
                            <td><span class="status-badge status-inactive">ÈÄÄ‰ºö</span></td>
                            <td>2024-04-12</td>
                            <td>
                                <div class="action-menu">
                                    <button class="action-button" onclick="toggleActionMenu(this, 'M001238')">‚ãÆ</button>
                                    <div class="action-popover">
                                        <div class="action-item detail" onclick="openDetailPage('M001238')">
                                            <span class="action-item-icon">üëÅÔ∏è</span>
                                            <span>Ë©≥Á¥∞</span>
                                        </div>
                                        <div class="action-item edit" onclick="openEditModal('M001238')">
                                            <span class="action-item-icon">‚úèÔ∏è</span>
                                            <span>Á∑®ÈõÜ</span>
                                        </div>
                                        <div class="action-item mail" onclick="sendEmail('M001238')">
                                            <span class="action-item-icon">üìß</span>
                                            <span>„É°„Éº„É´ÈÄÅ‰ø°</span>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                        <tr>
                            <td>M001239</td>
                            <td>
                                <div style="display: flex; align-items: center; gap: 10px;">
                                    <div>
                                        <div style="font-weight: 600;">‰ºäËó§ ÁúüÁî±Áæé</div>
                                        <small style="color: #7a7a7a;">„Ç§„Éà„Ç¶ „Éû„É¶„Éü</small>
                                    </div>
                                </div>
                            </td>
                            <td>ito@example.com</td>
                            <td>070-7777-8888</td>
                            <td><span class="status-badge status-active">„Ç¢„ÇØ„ÉÜ„Ç£„Éñ</span></td>
                            <td>2024-05-18</td>
                            <td>
                                <div class="action-menu">
                                    <button class="action-button" onclick="toggleActionMenu(this, 'M001239')">‚ãÆ</button>
                                    <div class="action-popover">
                                        <div class="action-item detail" onclick="openDetailPage('M001239')">
                                            <span class="action-item-icon">üëÅÔ∏è</span>
                                            <span>Ë©≥Á¥∞</span>
                                        </div>
                                        <div class="action-item edit" onclick="openEditModal('M001239')">
                                            <span class="action-item-icon">‚úèÔ∏è</span>
                                            <span>Á∑®ÈõÜ</span>
                                        </div>
                                        <div class="action-item mail" onclick="sendEmail('M001239')">
                                            <span class="action-item-icon">üìß</span>
                                            <span>„É°„Éº„É´ÈÄÅ‰ø°</span>
                                        </div>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </main>
    </div>

    <!-- ‰ºöÂì°Á∑®ÈõÜ„É¢„Éº„ÉÄ„É´ -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">‰ºöÂì°ÊÉÖÂ†±Á∑®ÈõÜ</h3>
                <button class="close" onclick="closeEditModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editForm">
                    <div class="form-section">
                        <h4 class="section-title">Âü∫Êú¨ÊÉÖÂ†±</h4>
                        <div class="form-grid">
                            <div class="form-group full-width">
                                <label class="form-label">‰ºöÂì°ID</label>
                                <input type="text" id="edit-member-id" class="form-input" readonly>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Ê∞èÂêçÔºàÂßìÔºâ <span class="required">*</span></label>
                                <input type="text" id="edit-last-name" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">Ê∞èÂêçÔºàÂêçÔºâ <span class="required">*</span></label>
                                <input type="text" id="edit-first-name" class="form-input" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">„Ç´„ÉäÔºàÂßìÔºâ <span class="required">*</span></label>
                                <input type="text" id="edit-last-kana" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">„Ç´„ÉäÔºàÂêçÔºâ <span class="required">*</span></label>
                                <input type="text" id="edit-first-kana" class="form-input" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ <span class="required">*</span></label>
                                <input type="email" id="edit-email" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">ÈõªË©±Áï™Âè∑ <span class="required">*</span></label>
                                <input type="tel" id="edit-phone" class="form-input" required>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">ÁîüÂπ¥ÊúàÊó•</label>
                                <input type="date" id="edit-birth-date" class="form-input">
                            </div>
                            <div class="form-group">
                                <label class="form-label">ÊÄßÂà•</label>
                                <select id="edit-gender" class="form-input">
                                    <option value="">ÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                                    <option value="Áî∑ÊÄß">Áî∑ÊÄß</option>
                                    <option value="Â•≥ÊÄß">Â•≥ÊÄß</option>
                                    <option value="„Åù„ÅÆ‰ªñ">„Åù„ÅÆ‰ªñ</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h4 class="section-title">‰ΩèÊâÄÊÉÖÂ†±</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">ÈÉµ‰æøÁï™Âè∑</label>
                                <div style="display: flex; gap: 10px;">
                                    <input type="text" id="edit-postal-code" class="form-input" placeholder="1234567" maxlength="7">
                                    <button type="button" class="btn btn-secondary" onclick="searchAddress()" style="white-space: nowrap;">‰ΩèÊâÄÊ§úÁ¥¢</button>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label">ÈÉΩÈÅìÂ∫úÁúå</label>
                                <select id="edit-prefecture" class="form-input">
                                    <option value="">ÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                                    <option value="Êù±‰∫¨ÈÉΩ">Êù±‰∫¨ÈÉΩ</option>
                                    <option value="Á•ûÂ•àÂ∑ùÁúå">Á•ûÂ•àÂ∑ùÁúå</option>
                                    <option value="ÂçÉËëâÁúå">ÂçÉËëâÁúå</option>
                                    <option value="ÂüºÁéâÁúå">ÂüºÁéâÁúå</option>
                                    <option value="Â§ßÈò™Â∫ú">Â§ßÈò™Â∫ú</option>
                                    <option value="ÊÑõÁü•Áúå">ÊÑõÁü•Áúå</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label class="form-label">Â∏ÇÂå∫Áî∫Êùë</label>
                                <input type="text" id="edit-city" class="form-input" placeholder="Êñ∞ÂÆøÂå∫">
                            </div>
                            <div class="form-group">
                                <label class="form-label">Áî∫Âêç„ÉªÁï™Âú∞</label>
                                <input type="text" id="edit-address1" class="form-input" placeholder="Ë•øÊñ∞ÂÆø1-1-1">
                            </div>
                            
                            <div class="form-group full-width">
                                <label class="form-label">Âª∫Áâ©Âêç„ÉªÈÉ®Â±ãÁï™Âè∑</label>
                                <input type="text" id="edit-address2" class="form-input" placeholder="‚óã‚óã„Éì„É´ 101Âè∑ÂÆ§">
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h4 class="section-title">„Çπ„ÉÜ„Éº„Çø„Çπ</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">‰ºöÂì°„Çπ„ÉÜ„Éº„Çø„Çπ <span class="required">*</span></label>
                                <select id="edit-status" class="form-input" required>
                                    <option value="„Ç¢„ÇØ„ÉÜ„Ç£„Éñ">„Ç¢„ÇØ„ÉÜ„Ç£„Éñ</option>
                                    <option value="ÈÄÄ‰ºö">ÈÄÄ‰ºö</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeEditModal()">„Ç≠„É£„É≥„Çª„É´</button>
                        <button type="submit" class="btn btn-primary">‰øùÂ≠ò</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- „É°„Éº„É´ÈÄÅ‰ø°„É¢„Éº„ÉÄ„É´ -->
    <div id="emailModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">„É°„Éº„É´ÈÄÅ‰ø°</h3>
                <button class="close" onclick="closeEmailModal()">&times;</button>
            </div>
            <div class="modal-body">
                <form id="emailForm">
                    <div class="form-section">
                        <h4 class="section-title">ÈÄÅ‰ø°ÂÖàÊÉÖÂ†±</h4>
                        <div class="form-grid">
                            <div class="form-group">
                                <label class="form-label">‰ºöÂì°ID</label>
                                <input type="text" id="email-member-id" class="form-input" readonly>
                            </div>
                            <div class="form-group">
                                <label class="form-label">‰ºöÂì°Âêç</label>
                                <input type="text" id="email-member-name" class="form-input" readonly>
                            </div>
                            <div class="form-group full-width">
                                <label class="form-label">ÈÄÅ‰ø°ÂÖà„É°„Éº„É´„Ç¢„Éâ„É¨„Çπ</label>
                                <input type="email" id="email-to" class="form-input" readonly>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h4 class="section-title">„É°„Éº„É´ÂÜÖÂÆπ</h4>
                        <div class="form-grid">
                            <div class="form-group full-width">
                                <label class="form-label">‰ª∂Âêç <span class="required">*</span></label>
                                <input type="text" id="email-subject" class="form-input" required placeholder="‰æãÔºöÈáçË¶Å„Å™„ÅäÁü•„Çâ„Åõ">
                            </div>
                            <div class="form-group full-width">
                                <label class="form-label">Êú¨Êñá <span class="required">*</span></label>
                                <textarea id="email-body" class="form-input" required rows="10" placeholder="„É°„Éº„É´Êú¨Êñá„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ..."></textarea>
                            </div>
                        </div>
                    </div>

                    <div class="form-section">
                        <h4 class="section-title">„ÉÜ„É≥„Éó„É¨„Éº„ÉàÈÅ∏Êäû</h4>
                        <div class="form-grid">
                            <div class="form-group full-width">
                                <label class="form-label">„ÉÜ„É≥„Éó„É¨„Éº„Éà</label>
                                <select id="email-template" class="form-input" onchange="applyTemplate()">
                                    <option value="">„ÉÜ„É≥„Éó„É¨„Éº„Éà„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                                    <option value="welcome">Êñ∞Ë¶èÁôªÈå≤Ê≠ìËøé„É°„Éº„É´</option>
                                    <option value="reminder">Êõ¥Êñ∞„É™„Éû„Ç§„É≥„ÉÄ„Éº</option>
                                    <option value="event">„Ç§„Éô„É≥„ÉàÊ°àÂÜÖ</option>
                                    <option value="newsletter">„Éã„É•„Éº„Çπ„É¨„Çø„Éº</option>
                                </select>
                            </div>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="closeEmailModal()">„Ç≠„É£„É≥„Çª„É´</button>
                        <button type="submit" class="btn btn-primary">ÈÄÅ‰ø°</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // „Çµ„É≥„Éó„É´‰ºöÂì°„Éá„Éº„Çø
        const membersData = {
            'M001234': {
                lastName: 'Â±±Áî∞',
                firstName: 'Â§™ÈÉé',
                email: 'yamada@example.com',
                phone: '090-1234-5678',
                ageGroup: '30‰ª£',
                location: 'Êù±‰∫¨ÈÉΩÊñ∞ÂÆøÂå∫',
                status: '„Ç¢„ÇØ„ÉÜ„Ç£„Éñ'
            },
            'M001235': {
                lastName: '‰ΩêËó§',
                firstName: 'Ëä±Â≠ê',
                email: 'sato@example.com',
                phone: '080-9876-5432',
                ageGroup: '40‰ª£',
                location: 'Á•ûÂ•àÂ∑ùÁúåÊ®™ÊµúÂ∏Ç',
                status: '„Ç¢„ÇØ„ÉÜ„Ç£„Éñ'
            },
            'M001236': {
                lastName: 'Èà¥Êú®',
                firstName: '‰∏ÄÈÉé',
                email: 'suzuki@example.com',
                phone: '070-5555-4444',
                ageGroup: '50‰ª£',
                location: 'ÂüºÁéâÁúåÂ§ßÂÆÆÂ∏Ç',
                status: '„Ç¢„ÇØ„ÉÜ„Ç£„Éñ'
            },
            'M001237': {
                lastName: 'Áî∞‰∏≠',
                firstName: 'ÁæéÂí≤',
                email: 'tanaka@example.com',
                phone: '080-7777-8888',
                ageGroup: '20‰ª£',
                location: 'ÂçÉËëâÁúåÂçÉËëâÂ∏Ç',
                status: 'ÈÄÄ‰ºö'
            },
            'M001238': {
                lastName: 'È´òÊ©ã',
                firstName: 'ÂÅ•Â§™',
                email: 'takahashi@example.com',
                phone: '080-5555-6666',
                ageGroup: '30‰ª£',
                location: 'Êù±‰∫¨ÈÉΩÊ∏ãË∞∑Âå∫',
                status: 'ÈÄÄ‰ºö'
            },
            'M001239': {
                lastName: '‰∏≠Êùë',
                firstName: '„Åï„Åè„Çâ',
                email: 'nakamura@example.com',
                phone: '090-3333-2222',
                ageGroup: '40‰ª£',
                location: 'Á•ûÂ•àÂ∑ùÁúåÂ∑ùÂ¥éÂ∏Ç',
                status: '„Ç¢„ÇØ„ÉÜ„Ç£„Éñ'
            }
        };

        let currentMemberId = null;

        // Á∑®ÈõÜ„É¢„Éº„ÉÄ„É´„ÇíÈñã„Åè
        function openEditModal(memberId) {
            currentMemberId = memberId;
            const data = membersData[memberId];
            
            if (!data) {
                alert('‰ºöÂì°„Éá„Éº„Çø„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì');
                return;
            }

            // „Éï„Ç©„Éº„É†„Å´„Éá„Éº„Çø„ÇíË®≠ÂÆö
            document.getElementById('edit-member-id').value = memberId;
            document.getElementById('edit-last-name').value = data.lastName;
            document.getElementById('edit-first-name').value = data.firstName;
            document.getElementById('edit-last-kana').value = data.lastKana || '';
            document.getElementById('edit-first-kana').value = data.firstKana || '';
            document.getElementById('edit-email').value = data.email;
            document.getElementById('edit-phone').value = data.phone;
            document.getElementById('edit-birth-date').value = data.birthDate || '';
            document.getElementById('edit-gender').value = data.gender || '';
            document.getElementById('edit-postal-code').value = data.postalCode || '';
            document.getElementById('edit-prefecture').value = data.prefecture || '';
            document.getElementById('edit-city').value = data.city || '';
            document.getElementById('edit-address1').value = data.address1 || '';
            document.getElementById('edit-address2').value = data.address2 || '';
            document.getElementById('edit-status').value = data.status;

            document.getElementById('editModal').classList.add('show');
        }

        // Á∑®ÈõÜ„É¢„Éº„ÉÄ„É´„ÇíÈñâ„Åò„Çã
        function closeEditModal() {
            document.getElementById('editModal').classList.remove('show');
        }

        // „Ç¢„ÇØ„Ç∑„Éß„É≥„É°„Éã„É•„Éº„ÅÆÂàá„ÇäÊõø„Åà
        function toggleActionMenu(button, memberId) {
            const popover = button.nextElementSibling;
            const isVisible = popover.classList.contains('show');
            
            // ‰ªñ„ÅÆ„Éù„ÉÉ„Éó„Ç™„Éº„Éê„Éº„ÇíÂÖ®„Å¶Èñâ„Åò„Çã
            document.querySelectorAll('.action-popover').forEach(p => {
                p.classList.remove('show');
            });
            
            // „ÇØ„É™„ÉÉ„ÇØ„Åï„Çå„Åü„Éù„ÉÉ„Éó„Ç™„Éº„Éê„Éº„ÅÆË°®Á§∫Âàá„ÇäÊõø„Åà
            if (!isVisible) {
                popover.classList.add('show');
            }
        }


        // ÈÅ∏ÊäûÊï∞„ÅÆÊõ¥Êñ∞
        function updateSelectedCount() {
            const checkboxes = document.querySelectorAll('.row-checkbox:checked');
            const countElements = document.querySelectorAll('.selected-count');
            countElements.forEach(el => {
                el.textContent = `${checkboxes.length}‰ª∂ÈÅ∏Êäû‰∏≠`;
            });
        }

        // ÂÖ®ÈÅ∏Êäû/ÂÖ®Ëß£Èô§
        function toggleSelectAll() {
            const selectAll = document.getElementById('selectAll');
            const checkboxes = document.querySelectorAll('.row-checkbox');
            checkboxes.forEach(cb => {
                cb.checked = selectAll.checked;
            });
            updateSelectedCount();
        }

        // Ë©≥Á¥∞„Éö„Éº„Ç∏„Å´ÈÅ∑Áßª
        function openDetailPage(memberId) {
            window.location.href = `member_detail.html?id=${memberId}`;
        }

        // Ë©≥Á¥∞„É¢„Éº„ÉÄ„É´„ÇíÈñã„Åè
        function openDetailModal(memberId) {
            document.getElementById('memberModal').classList.add('show');
            console.log('Opening detail for:', memberId);
        }

        // „É¢„Éº„ÉÄ„É´„ÇíÈñâ„Åò„Çã
        function closeModal() {
            document.getElementById('memberModal').classList.remove('show');
        }

        // „É°„Éº„É´ÈÄÅ‰ø°„É¢„Éº„ÉÄ„É´„ÇíÈñã„Åè
        function sendEmail(memberId) {
            const data = membersData[memberId];
            
            if (!data) {
                alert('‰ºöÂì°„Éá„Éº„Çø„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì');
                return;
            }

            // „É°„Éº„É´ÈÄÅ‰ø°ÂÖàÊÉÖÂ†±„ÇíË®≠ÂÆö
            document.getElementById('email-member-id').value = memberId;
            document.getElementById('email-member-name').value = data.lastName + ' ' + data.firstName;
            document.getElementById('email-to').value = data.email;
            
            // „Éï„Ç©„Éº„É†„Çí„ÇØ„É™„Ç¢
            document.getElementById('email-subject').value = '';
            document.getElementById('email-body').value = '';
            document.getElementById('email-template').value = '';
            
            document.getElementById('emailModal').classList.add('show');
        }

        // „É°„Éº„É´ÈÄÅ‰ø°„É¢„Éº„ÉÄ„É´„ÇíÈñâ„Åò„Çã
        function closeEmailModal() {
            document.getElementById('emailModal').classList.remove('show');
        }

        // „ÉÜ„É≥„Éó„É¨„Éº„Éà„ÇíÈÅ©Áî®
        function applyTemplate() {
            const template = document.getElementById('email-template').value;
            const memberName = document.getElementById('email-member-name').value;
            const subjectField = document.getElementById('email-subject');
            const bodyField = document.getElementById('email-body');

            switch (template) {
                case 'welcome':
                    subjectField.value = '„Äê‰∏çÂãïÁî£„Éù„Éº„Çø„É´„ÄëÊñ∞Ë¶è‰ºöÂì°ÁôªÈå≤„ÅÆ„ÅîÊ°àÂÜÖ';
                    bodyField.value = `${memberName} Êßò\n\n‰∏çÂãïÁî£„Éù„Éº„Çø„É´„Å∏„ÅÆ„ÅîÁôªÈå≤„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇ\n\nÁôªÈå≤„ÅåÂÆå‰∫Ü„ÅÑ„Åü„Åó„Åæ„Åó„Åü„ÄÇ\n„Åì„Çå„Çà„ÇäÂºäÁ§æ„Çµ„Éº„Éì„Çπ„Çí„ÅîÂà©Áî®„ÅÑ„Åü„Å†„Åë„Åæ„Åô„ÄÇ\n\n„Åî‰∏çÊòé„Å™ÁÇπ„Åå„Åî„Åñ„ÅÑ„Åæ„Åó„Åü„Çâ„ÄÅ„ÅäÊ∞óËªΩ„Å´„ÅäÂïè„ÅÑÂêà„Çè„Åõ„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n‰∏çÂãïÁî£„Éù„Éº„Çø„É´ÈÅãÂñ∂‰∫ãÂãôÂ±Ä`;
                    break;
                case 'reminder':
                    subjectField.value = '„ÄêÈáçË¶Å„ÄëÊÉÖÂ†±Êõ¥Êñ∞„ÅÆ„ÅäÈ°ò„ÅÑ';
                    bodyField.value = `${memberName} Êßò\n\n„ÅÑ„Å§„ÇÇÂºäÁ§æ„Çµ„Éº„Éì„Çπ„Çí„ÅîÂà©Áî®„ÅÑ„Åü„Å†„Åç„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇ\n\n‰ºöÂì°ÊÉÖÂ†±„ÅÆÊõ¥Êñ∞ÊôÇÊúü„Å®„Å™„Çä„Åæ„Åó„Åü„ÄÇ\nÊúÄÊñ∞„ÅÆÊÉÖÂ†±„Å´„Ç¢„ÉÉ„Éó„Éá„Éº„Éà„ÅÑ„Åü„Å†„Åç„Åæ„Åô„Çà„ÅÜ„ÅäÈ°ò„ÅÑ„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ\n\nÊõ¥Êñ∞„ÅØ„Åì„Å°„Çâ„Åã„ÇâÔºö[URL]\n\n‰∏çÂãïÁî£„Éù„Éº„Çø„É´ÈÅãÂñ∂‰∫ãÂãôÂ±Ä`;
                    break;
                case 'event':
                    subjectField.value = '„Äê„Ç§„Éô„É≥„ÉàÊ°àÂÜÖ„Äë‰∏çÂãïÁî£„Çª„Éü„Éä„ÉºÈñãÂÇ¨„ÅÆ„ÅäÁü•„Çâ„Åõ';
                    bodyField.value = `${memberName} Êßò\n\nÂπ≥Á¥†„Çà„ÇäÂºäÁ§æ„Çµ„Éº„Éì„Çπ„Çí„ÅîÂà©Áî®„ÅÑ„Åü„Å†„Åç„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇ\n\n‰∏çÂãïÁî£ÊäïË≥á„Çª„Éü„Éä„Éº„ÇíÈñãÂÇ¨„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ\n\nÈñãÂÇ¨Êó•ÊôÇÔºö2024Âπ¥‚óãÊúà‚óãÊó•Ôºà‚óãÔºâ\n‰ºöÂ†¥ÔºöÊù±‰∫¨ÈÉΩ‚óã‚óãÂå∫‚óã‚óã\n\n„ÅäÁî≥„ÅóËæº„Åø„ÅØ„Åì„Å°„Çâ„Åã„ÇâÔºö[URL]\n\nÁöÜÊßò„ÅÆ„ÅîÂèÇÂä†„Çí„ÅäÂæÖ„Å°„Åó„Å¶„Åä„Çä„Åæ„Åô„ÄÇ\n\n‰∏çÂãïÁî£„Éù„Éº„Çø„É´ÈÅãÂñ∂‰∫ãÂãôÂ±Ä`;
                    break;
                case 'newsletter':
                    subjectField.value = '„Äê‰∏çÂãïÁî£„Éù„Éº„Çø„É´„Äë‰ªäÊúà„ÅÆ„Éã„É•„Éº„Çπ„É¨„Çø„Éº';
                    bodyField.value = `${memberName} Êßò\n\n‰ªäÊúà„ÅÆ‰∏çÂãïÁî£Â∏ÇÂ†¥ÂãïÂêë„Çí„ÅäÂ±ä„Åë„Åó„Åæ„Åô„ÄÇ\n\n‚ñ† ‰ªäÊúà„ÅÆ„Éà„Éî„ÉÉ„ÇØ„Çπ\n„ÉªÂ∏ÇÂ†¥ÂãïÂêë„Å´„Å§„ÅÑ„Å¶\n„ÉªÊñ∞ÁùÄÁâ©‰ª∂ÊÉÖÂ†±\n„Éª„ÅäÂΩπÁ´ã„Å°ÊÉÖÂ†±\n\nË©≥Á¥∞„ÅØÂºäÁ§æWeb„Çµ„Ç§„Éà„Çí„ÅîÁ¢∫Ë™ç„Åè„Å†„Åï„ÅÑ„ÄÇ\n\n‰∏çÂãïÁî£„Éù„Éº„Çø„É´ÈÅãÂñ∂‰∫ãÂãôÂ±Ä`;
                    break;
            }
        }

        // „É°„Éº„É´„Éó„É¨„Éì„É•„Éº
        function previewEmail() {
            const subject = document.getElementById('email-subject').value;
            const body = document.getElementById('email-body').value;
            const to = document.getElementById('email-to').value;
            
            if (!subject || !body) {
                alert('‰ª∂Âêç„Å®Êú¨Êñá„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            
            alert(`„Éó„É¨„Éì„É•„Éº\n\nÈÄÅ‰ø°ÂÖà: ${to}\n‰ª∂Âêç: ${subject}\n\n${body}`);
        }

        // Ê§úÁ¥¢Ê©üËÉΩ
        function searchMembers() {
            const searchTerm = document.getElementById('searchBox').value.toLowerCase();
            const rows = document.querySelectorAll('#memberTable tbody tr');
            
            rows.forEach(row => {
                const text = row.textContent.toLowerCase();
                row.style.display = text.includes(searchTerm) ? '' : 'none';
            });
        }

        // „Éï„Ç£„É´„Çø„Éº„ÇØ„É™„Ç¢
        function clearFilters() {
            document.getElementById('statusFilter').value = '';
            document.getElementById('periodFilter').value = '';
            document.getElementById('ageFilter').value = '';
            document.getElementById('regionFilter').value = '';
            document.getElementById('searchBox').value = '';
            filterTable();
        }

        // „Éï„Ç£„É´„Çø„ÉºÈÅ©Áî®
        function filterTable() {
            console.log('Applying filters...');
        }

        // „Çø„ÉñÂàá„ÇäÊõø„Åà
        function switchTab(tabName) {
            const tabs = document.querySelectorAll('.tab-item');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            event.target.classList.add('active');
            
            console.log('Switching to tab:', tabName);
        }

        // CSV „Ç®„ÇØ„Çπ„Éù„Éº„Éà
        function exportMembers() {
            console.log('Exporting members...');
            alert('‰ºöÂì°„Éá„Éº„Çø„ÇíCSV„Åß„Ç®„ÇØ„Çπ„Éù„Éº„Éà‰∏≠...');
        }

        // ‰∏ÄÊã¨„É°„Éº„É´ÈÄÅ‰ø°
        function bulkSendMail() {
            const selected = document.querySelectorAll('.row-checkbox:checked');
            if (selected.length === 0) {
                alert('„É°„Éº„É´ÈÄÅ‰ø°ÂØæË±°„ÅÆ‰ºöÂì°„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            console.log('Sending bulk email to:', selected.length, 'members');
            alert(`ÈÅ∏Êäû„Åó„Åü${selected.length}Âêç„Å´„É°„Éº„É´„ÇíÈÄÅ‰ø°„Åó„Åæ„Åô`);
        }

        // ‰∏ÄÊã¨„Çπ„ÉÜ„Éº„Çø„ÇπÊõ¥Êñ∞
        function bulkUpdateStatus(status) {
            const selected = document.querySelectorAll('.row-checkbox:checked');
            if (selected.length === 0) {
                alert('„Çπ„ÉÜ„Éº„Çø„ÇπÂ§âÊõ¥ÂØæË±°„ÅÆ‰ºöÂì°„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            
            if (confirm(`ÈÅ∏Êäû„Åó„Åü${selected.length}Âêç„ÅÆ„Çπ„ÉÜ„Éº„Çø„Çπ„ÇíÂ§âÊõ¥„Åó„Åæ„Åô„ÅãÔºü`)) {
                console.log('Updating status to:', status);
            }
        }

        // ÈÅ∏ÊäûÈ†ÖÁõÆ„ÅÆ„Ç®„ÇØ„Çπ„Éù„Éº„Éà
        function bulkExport() {
            const selected = document.querySelectorAll('.row-checkbox:checked');
            if (selected.length === 0) {
                alert('„Ç®„ÇØ„Çπ„Éù„Éº„Éà„Åô„Çã‰ºöÂì°„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            console.log('Exporting selected members...');
        }


        // URL„Éë„É©„É°„Éº„Çø„ÇíÂá¶ÁêÜ
        function handleUrlParams() {
            const urlParams = new URLSearchParams(window.location.search);
            const action = urlParams.get('action');
            const memberId = urlParams.get('id');
            
            if (action && memberId) {
                setTimeout(() => {
                    switch (action) {
                        case 'edit':
                            openEditModal(memberId);
                            break;
                        case 'email':
                            sendEmail(memberId);
                            break;
                    }
                }, 100);
                
                // URL„Éë„É©„É°„Éº„Çø„Çí„ÇØ„É™„Ç¢
                if (window.history.replaceState) {
                    window.history.replaceState({}, document.title, window.location.pathname);
                }
            }
        }

        // „Éï„Ç©„Éº„É†ÈÄÅ‰ø°Âá¶ÁêÜ
        document.addEventListener('DOMContentLoaded', function() {
            // URL„Éë„É©„É°„Éº„ÇøÂá¶ÁêÜ„ÇíÂÆüË°å
            handleUrlParams();
            // Á∑®ÈõÜ„Éï„Ç©„Éº„É†„ÅÆÈÄÅ‰ø°Âá¶ÁêÜ
            document.getElementById('editForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                // „Éï„Ç©„Éº„É†„Éá„Éº„Çø„ÇíÂèéÈõÜ
                const formData = {
                    memberId: document.getElementById('edit-member-id').value,
                    lastName: document.getElementById('edit-last-name').value,
                    firstName: document.getElementById('edit-first-name').value,
                    email: document.getElementById('edit-email').value,
                    phone: document.getElementById('edit-phone').value,
                    location: document.getElementById('edit-location').value,
                    status: document.getElementById('edit-status').value
                };
                
                // „Çµ„É≥„Éó„É´„Éá„Éº„Çø„ÇíÊõ¥Êñ∞
                membersData[currentMemberId] = formData;
                
                // „ÉÜ„Éº„Éñ„É´„ÅÆË©≤ÂΩìË°å„ÇíÊõ¥Êñ∞
                const rows = document.querySelectorAll('tbody tr');
                rows.forEach(row => {
                    const cells = row.getElementsByTagName('td');
                    if (cells[0] && cells[0].textContent === currentMemberId) {
                        // ÂêçÂâç„ÇíÊõ¥Êñ∞
                        const nameDiv = cells[1].querySelector('div > div');
                        if (nameDiv) {
                            nameDiv.textContent = `${formData.lastName} ${formData.firstName}`;
                        }
                        
                        // „É°„Éº„É´„Ç¢„Éâ„É¨„Çπ„ÇíÊõ¥Êñ∞
                        if (cells[2]) cells[2].textContent = formData.email;
                        
                        // ÈõªË©±Áï™Âè∑„ÇíÊõ¥Êñ∞
                        if (cells[3]) cells[3].textContent = formData.phone;
                        
                        // Âπ¥‰ª£„ÇíÊõ¥Êñ∞
                        if (cells[4]) cells[4].textContent = formData.ageGroup;
                        
                        // Â±Ö‰ΩèÂú∞Âüü„ÇíÊõ¥Êñ∞
                        if (cells[5]) cells[5].textContent = formData.location;
                        
                        // „Çπ„ÉÜ„Éº„Çø„Çπ„ÇíÊõ¥Êñ∞
                        if (cells[6]) {
                            const badge = cells[6].querySelector('.status-badge');
                            if (badge) {
                                badge.textContent = formData.status;
                                // „Çπ„ÉÜ„Éº„Çø„Çπ„Å´Âøú„Åò„Å¶„ÇØ„É©„Çπ„ÇíÂ§âÊõ¥
                                badge.className = 'status-badge';
                                if (formData.status === '„Ç¢„ÇØ„ÉÜ„Ç£„Éñ') {
                                    badge.classList.add('status-active');
                                } else if (formData.status === 'ÈÄÄ‰ºö') {
                                    badge.classList.add('status-inactive');
                                }
                            }
                        }
                    }
                });
                
                alert('‰ºöÂì°ÊÉÖÂ†±„ÇíÊõ¥Êñ∞„Åó„Åæ„Åó„Åü');
                closeEditModal();
            });

            // „É°„Éº„É´ÈÄÅ‰ø°„Éï„Ç©„Éº„É†„ÅÆÈÄÅ‰ø°Âá¶ÁêÜ
            document.getElementById('emailForm').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const subject = document.getElementById('email-subject').value;
                const body = document.getElementById('email-body').value;
                const to = document.getElementById('email-to').value;
                const memberName = document.getElementById('email-member-name').value;
                
                if (!subject || !body) {
                    alert('‰ª∂Âêç„Å®Êú¨Êñá„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                    return;
                }
                
                // „É°„Éº„É´ÈÄÅ‰ø°Âá¶ÁêÜÔºàÂÆüÈöõ„ÅÆÂÆüË£Ö„Åß„ÅØ API „ÇíÂëº„Å≥Âá∫„ÅóÔºâ
                alert(`„É°„Éº„É´„ÇíÈÄÅ‰ø°„Åó„Åæ„Åó„Åü\n\nÈÄÅ‰ø°ÂÖà: ${memberName} (${to})\n‰ª∂Âêç: ${subject}`);
                closeEmailModal();
            });
        });

        // „Éâ„Ç≠„É•„É°„É≥„Éà„ÇØ„É™„ÉÉ„ÇØ„Åß„Éù„ÉÉ„Éó„Ç™„Éº„Éê„Éº„ÇíÈñâ„Åò„Çã
        document.addEventListener('click', function(event) {
            if (!event.target.closest('.action-menu')) {
                document.querySelectorAll('.action-popover').forEach(popover => {
                    popover.classList.remove('show');
                });
            }
        });

        // ‰ΩèÊâÄÊ§úÁ¥¢Ê©üËÉΩ
        function searchAddress() {
            const postal = document.getElementById('edit-postal-code').value;
            if (!postal) {
                alert('ÈÉµ‰æøÁï™Âè∑„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            
            // ÂÆüÈöõ„ÅÆ‰ΩèÊâÄÊ§úÁ¥¢API„ÅÆ‰ª£„Çè„Çä„Å´„Çµ„É≥„Éó„É´„Éá„Éº„Çø„Çí‰ΩøÁî®
            if (postal === '1600023') {
                document.getElementById('edit-prefecture').value = 'Êù±‰∫¨ÈÉΩ';
                document.getElementById('edit-city').value = 'Êñ∞ÂÆøÂå∫';
                document.getElementById('edit-address1').value = 'Ë•øÊñ∞ÂÆø';
                alert('‰ΩèÊâÄ„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åó„Åü');
            } else if (postal === '2310001') {
                document.getElementById('edit-prefecture').value = 'Á•ûÂ•àÂ∑ùÁúå';
                document.getElementById('edit-city').value = 'Ê®™ÊµúÂ∏Ç‰∏≠Âå∫';
                document.getElementById('edit-address1').value = 'Â§™Áî∞Áî∫';
                alert('‰ΩèÊâÄ„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åó„Åü');
            } else {
                alert('‰ΩèÊâÄÊ§úÁ¥¢Ê©üËÉΩ„ÇíÂÆüË°å„Åó„Åæ„ÅôÔºàÈÉµ‰æøÁï™Âè∑: ' + postal + 'Ôºâ\n‚ÄªÂÆüÈöõ„ÅÆÂÆüË£Ö„Åß„ÅØÈÉµ‰æøÁï™Âè∑API„Å®ÈÄ£Êê∫„Åó„Åæ„Åô');
            }
        }

        // „É¢„Éº„ÉÄ„É´Â§ñ„ÇØ„É™„ÉÉ„ÇØ„ÅßÈñâ„Åò„Çã
        window.onclick = function(event) {
            const editModal = document.getElementById('editModal');
            if (event.target === editModal) {
                closeEditModal();
            }
            
            const memberModal = document.getElementById('memberModal');
            if (event.target === memberModal) {
                closeModal();
            }
            
            const emailModal = document.getElementById('emailModal');
            if (event.target === emailModal) {
                closeEmailModal();
            }
        }

    </script>
</body>
</html>