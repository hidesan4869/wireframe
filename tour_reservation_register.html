<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ë¶ãÂ≠¶‰∫àÁ¥ÑÁôªÈå≤ - ‰∏çÂãïÁî£„Éù„Éº„Çø„É´ÁÆ°ÁêÜÁîªÈù¢</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f9f9f9;
            color: #2c2c2c;
        }

        .container {
            display: flex;
            height: 100vh;
        }

        /* „Éò„ÉÉ„ÉÄ„Éº */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: #2c2c2c;
            color: white;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-bottom: 1px solid #e0e0e0;
        }

        .header h1 {
            font-size: 20px;
            font-weight: 600;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        /* „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ */
        .main-content {
            flex: 1;
            margin-top: 60px;
            padding: 30px;
            overflow-y: auto;
        }

        .breadcrumb {
            background: white;
            padding: 15px 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            border: 1px solid #e0e0e0;
            font-size: 14px;
            color: #6a6a6a;
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .page-title {
            font-size: 28px;
            font-weight: 600;
            color: #2c2c2c;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: #4a4a4a;
            color: white;
        }

        .btn-primary:hover {
            background: #3a3a3a;
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: #8a8a8a;
            color: white;
        }

        /* „Éï„Ç©„Éº„É† */
        .form-container {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border: 1px solid #e0e0e0;
        }

        .form-section {
            margin-bottom: 40px;
        }

        .form-section:last-child {
            margin-bottom: 0;
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            color: #2c2c2c;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e0e0e0;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group.full-width {
            grid-column: 1 / -1;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #4a4a4a;
        }

        .required {
            color: #d32f2f;
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #c0c0c0;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        .form-input:focus {
            outline: none;
            border-color: #6a6a6a;
            box-shadow: 0 0 0 2px rgba(106, 106, 106, 0.25);
        }

        .form-textarea {
            height: 120px;
            resize: vertical;
        }

        .form-select {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid #c0c0c0;
            border-radius: 6px;
            font-size: 14px;
            background: white;
        }

        .form-radio {
            display: flex;
            gap: 20px;
            align-items: center;
            margin-top: 10px;
        }

        .radio-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .radio-option input[type="radio"] {
            width: 18px;
            height: 18px;
        }

        /* Êó•ÊôÇÈÅ∏Êäû */
        .datetime-section {
            background: #f8f8f8;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .time-slots {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .time-slot {
            padding: 10px;
            border: 2px solid #c0c0c0;
            border-radius: 6px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease;
            background: white;
        }

        .time-slot:hover {
            border-color: #6a6a6a;
            background: #f0f0f0;
        }

        .time-slot.selected {
            border-color: #4a4a4a;
            background: #4a4a4a;
            color: white;
        }

        .time-slot.unavailable {
            background: #f0f0f0;
            color: #7a7a7a;
            cursor: not-allowed;
            border-color: #e0e0e0;
        }

        /* ‰ΩèÊâÄÊ§úÁ¥¢ */
        .address-search {
            display: flex;
            gap: 10px;
            align-items: end;
        }

        .address-search .form-input {
            flex: 1;
        }

        .search-btn {
            padding: 12px 16px;
            background: #6a6a6a;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            white-space: nowrap;
        }

        /* Áâ©‰ª∂ÊÉÖÂ†±„Ç´„Éº„Éâ */
        .property-card {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            background: #f8f8f8;
            margin-bottom: 20px;
        }

        .property-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c2c2c;
            margin-bottom: 10px;
        }

        .property-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }

        .property-detail {
            color: #6a6a6a;
            font-size: 14px;
        }

        /* „Éï„Ç©„Éº„É†„Ç¢„ÇØ„Ç∑„Éß„É≥ */
        .form-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 30px;
            border-top: 2px solid #e0e0e0;
            margin-top: 40px;
        }

        .form-actions-left {
            display: flex;
            gap: 10px;
        }

        .form-actions-right {
            display: flex;
            gap: 10px;
        }

        /* „Éê„É™„Éá„Éº„Ç∑„Éß„É≥ */
        .form-error {
            color: #d32f2f;
            font-size: 12px;
            margin-top: 5px;
        }

        .form-input.error {
            border-color: #d32f2f;
        }

        .form-input.error:focus {
            box-shadow: 0 0 0 2px rgba(211, 47, 47, 0.25);
        }

        /* Á¢∫Ë™çÁîªÈù¢ */
        .confirmation-section {
            background: #f8f8f8;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .confirm-grid {
            display: grid;
            grid-template-columns: 150px 1fr;
            gap: 15px;
            margin-bottom: 10px;
        }

        .confirm-label {
            font-weight: 600;
            color: #6a6a6a;
        }

        .confirm-value {
            color: #2c2c2c;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- „Éò„ÉÉ„ÉÄ„Éº -->
        <header class="header">
            <h1 style="cursor: pointer;" onclick="window.location.href='index.html'">üè† ‰∏çÂãïÁî£„Éù„Éº„Çø„É´ÁÆ°ÁêÜ„Ç∑„Çπ„ÉÜ„É†</h1>
            <div class="user-info">
                <span>Áî∞‰∏≠ Â§™ÈÉé„Åï„Çì</span>
                <button class="btn btn-secondary">„É≠„Ç∞„Ç¢„Ç¶„Éà</button>
            </div>
        </header>

        <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
        <main class="main-content">
            <div class="breadcrumb">
                <a href="index.html" style="color: #6a6a6a; text-decoration: none;">„Éõ„Éº„É†</a> > 
                Ë¶ãÂ≠¶‰∫àÁ¥ÑÁÆ°ÁêÜ > Ë¶ãÂ≠¶‰∫àÁ¥ÑÁôªÈå≤
            </div>

            <div class="page-header">
                <h2 class="page-title">üëÅÔ∏è Ë¶ãÂ≠¶‰∫àÁ¥ÑÁôªÈå≤</h2>
                <div class="action-buttons">
                    <button class="btn btn-secondary" onclick="saveDraft()">‰∏ãÊõ∏„Åç‰øùÂ≠ò</button>
                    <button class="btn btn-secondary" onclick="previewReservation()">„Éó„É¨„Éì„É•„Éº</button>
                </div>
            </div>

            <form id="tourReservationForm" class="form-container">
                <!-- Áâ©‰ª∂ÈÅ∏Êäû -->
                <div class="form-section">
                    <h3 class="section-title">Áâ©‰ª∂ÊÉÖÂ†±</h3>
                    
                    <div class="form-group">
                        <label class="form-label">
                            Áâ©‰ª∂„Çø„Ç§„Éó <span class="required">*</span>
                        </label>
                        <select class="form-select" id="propertyType" required onchange="handlePropertyTypeChange()">
                            <option value="">Áâ©‰ª∂„Çø„Ç§„Éó„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                            <option value="house">‰ΩèÂÆÖÔºàÊ≥®Êñá‰ΩèÂÆÖ„ÉªÊñ∞ÁØâÊà∏Âª∫„Å¶Ôºâ</option>
                            <option value="land">ÂÆÖÂú∞ÔºàÂúüÂú∞Ôºâ</option>
                        </select>
                        <div class="form-error" id="propertyTypeError"></div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">
                            ‰ΩèÂÆÖÂèä„Å≥ÂÆÖÂú∞Âêç <span class="required">*</span>
                        </label>
                        <select class="form-select" id="propertyName" required>
                            <option value="">„Åæ„ÅöÁâ©‰ª∂„Çø„Ç§„Éó„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                        </select>
                        <div class="form-error" id="propertyNameError"></div>
                    </div>

                    <!-- ÈÅ∏Êäû„Åï„Çå„ÅüÁâ©‰ª∂„ÅÆË©≥Á¥∞ÊÉÖÂ†± -->
                    <div id="propertyDetails" class="property-card" style="display: none;">
                        <div class="property-title" id="selectedPropertyTitle">Áâ©‰ª∂Ë©≥Á¥∞</div>
                        <div class="property-details">
                            <div class="property-detail">
                                <strong>‰ΩèÊâÄ:</strong> <span id="propertyAddress">-</span>
                            </div>
                            <div class="property-detail">
                                <strong>‰æ°Ê†º:</strong> <span id="propertyPrice">-</span>
                            </div>
                            <div class="property-detail">
                                <strong>Èù¢Á©ç:</strong> <span id="propertyArea">-</span>
                            </div>
                            <div class="property-detail">
                                <strong>ÁØâÂπ¥Êúà:</strong> <span id="propertyAge">-</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ë¶ãÂ≠¶Êó•ÊôÇ -->
                <div class="form-section">
                    <h3 class="section-title">Ë¶ãÂ≠¶Êó•ÊôÇ</h3>
                    
                    <div class="datetime-section">
                        <div class="form-group">
                            <label class="form-label">
                                Â∏åÊúõË¶ãÂ≠¶Êó• <span class="required">*</span>
                            </label>
                            <input type="date" class="form-input" id="tourDate" required onchange="loadAvailableTimeSlots()">
                            <div class="form-error" id="tourDateError"></div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Â∏åÊúõÊôÇÈñì <span class="required">*</span>
                            </label>
                            <div class="time-slots" id="timeSlots">
                                <!-- ÊôÇÈñì„Çπ„É≠„ÉÉ„Éà„ÅØÊó•‰ªòÈÅ∏ÊäûÂæå„Å´ÂãïÁöÑ„Å´ÁîüÊàê -->
                            </div>
                            <input type="hidden" id="selectedTimeSlot" required>
                            <div class="form-error" id="timeSlotError"></div>
                        </div>
                    </div>
                </div>

                <!-- ÈõÜÂêàÂ†¥ÊâÄ -->
                <div class="form-section">
                    <h3 class="section-title">ÈõÜÂêàÂ†¥ÊâÄ</h3>
                    
                    <div class="form-group">
                        <label class="form-label">
                            ÈõÜÂêàÂ†¥ÊâÄ <span class="required">*</span>
                        </label>
                        <select class="form-select" id="meetingPoint" required>
                            <option value="">ÈõÜÂêàÂ†¥ÊâÄ„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>
                            <option value="property">ÁèæÂú∞ÔºàÁâ©‰ª∂ÂâçÔºâ</option>
                            <option value="station">ÊúÄÂØÑ„ÇäÈßÖ</option>
                            <option value="office">Âñ∂Ê•≠ÊâÄ</option>
                            <option value="other">„Åù„ÅÆ‰ªñ</option>
                        </select>
                        <div class="form-error" id="meetingPointError"></div>
                    </div>

                    <div class="form-group" id="otherMeetingPoint" style="display: none;">
                        <label class="form-label">ÈõÜÂêàÂ†¥ÊâÄ„ÅÆË©≥Á¥∞</label>
                        <input type="text" class="form-input" id="meetingPointDetail" 
                               placeholder="Ë©≥Á¥∞„Å™ÈõÜÂêàÂ†¥ÊâÄ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ">
                    </div>
                </div>

                <!-- „É¶„Éº„Ç∂„ÉºÊÉÖÂ†± -->
                <div class="form-section">
                    <h3 class="section-title">„ÅäÂÆ¢ÊßòÊÉÖÂ†±</h3>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">
                                Ê∞èÂêçÔºàÂßìÔºâ <span class="required">*</span>
                            </label>
                            <input type="text" class="form-input" id="lastName" required 
                                   placeholder="Â±±Áî∞">
                            <div class="form-error" id="lastNameError"></div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                Ê∞èÂêçÔºàÂêçÔºâ <span class="required">*</span>
                            </label>
                            <input type="text" class="form-input" id="firstName" required 
                                   placeholder="Â§™ÈÉé">
                            <div class="form-error" id="firstNameError"></div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                „Éï„É™„Ç¨„ÉäÔºàÂßìÔºâ <span class="required">*</span>
                            </label>
                            <input type="text" class="form-input" id="lastNameKana" required 
                                   placeholder="„É§„Éû„ÉÄ">
                            <div class="form-error" id="lastNameKanaError"></div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                „Éï„É™„Ç¨„ÉäÔºàÂêçÔºâ <span class="required">*</span>
                            </label>
                            <input type="text" class="form-input" id="firstNameKana" required 
                                   placeholder="„Çø„É≠„Ç¶">
                            <div class="form-error" id="firstNameKanaError"></div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                „É°„Éº„É´„Ç¢„Éâ„É¨„Çπ <span class="required">*</span>
                            </label>
                            <input type="email" class="form-input" id="email" required 
                                   placeholder="example@email.com">
                            <div class="form-error" id="emailError"></div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">
                                ÈõªË©±Áï™Âè∑ <span class="required">*</span>
                            </label>
                            <input type="tel" class="form-input" id="phone" required 
                                   placeholder="090-1234-5678">
                            <div class="form-error" id="phoneError"></div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">ÈÉµ‰æøÁï™Âè∑</label>
                            <div class="address-search">
                                <input type="text" class="form-input" id="zipCode" 
                                       placeholder="123-4567" pattern="[0-9]{3}-[0-9]{4}">
                                <button type="button" class="search-btn" onclick="searchAddress()">‰ΩèÊâÄÊ§úÁ¥¢</button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="form-label">ÈÉΩÈÅìÂ∫úÁúå</label>
                            <select class="form-select" id="prefecture">
                                <option value="">ÈÉΩÈÅìÂ∫úÁúå„ÇíÈÅ∏Êäû</option>
                                <option value="tokyo">Êù±‰∫¨ÈÉΩ</option>
                                <option value="kanagawa">Á•ûÂ•àÂ∑ùÁúå</option>
                                <option value="saitama">ÂüºÁéâÁúå</option>
                                <option value="chiba">ÂçÉËëâÁúå</option>
                                <option value="osaka">Â§ßÈò™Â∫ú</option>
                                <option value="kyoto">‰∫¨ÈÉΩÂ∫ú</option>
                                <option value="other">„Åù„ÅÆ‰ªñ</option>
                            </select>
                        </div>

                        <div class="form-group full-width">
                            <label class="form-label">‰ΩèÊâÄ</label>
                            <input type="text" class="form-input" id="address" 
                                   placeholder="Êñ∞ÂÆøÂå∫Ë•øÊñ∞ÂÆø1-1-1 ‚óã‚óã„Éû„É≥„Ç∑„Éß„É≥ 101Âè∑ÂÆ§">
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">ÂÇôËÄÉ</label>
                        <textarea class="form-input form-textarea" id="remarks" 
                                  placeholder="Ë¶ãÂ≠¶„Å´Èñ¢„Åô„Çã„ÅîË¶ÅÊúõ„ÇÑ„ÅîË≥™Âïè„Åå„ÅÇ„Çå„Å∞„ÅîË®òÂÖ•„Åè„Å†„Åï„ÅÑ..."></textarea>
                    </div>
                </div>

                <!-- Â£≤Âç¥‰∫àÂÆöÔºàÂúüÂú∞„ÅÆÂ†¥Âêà„ÅÆ„ÅøË°®Á§∫Ôºâ -->
                <div class="form-section" id="landSaleSection" style="display: none;">
                    <h3 class="section-title">Â£≤Âç¥‰∫àÂÆö„Å´„Å§„ÅÑ„Å¶</h3>
                    
                    <div class="form-group">
                        <label class="form-label">
                            ÁèæÂú®„Åä‰Ωè„Åæ„ÅÑ„ÅÆÁâ©‰ª∂„ÅÆÂ£≤Âç¥‰∫àÂÆö„ÅØ„ÅÇ„Çä„Åæ„Åô„ÅãÔºü <span class="required">*</span>
                        </label>
                        <div class="form-radio">
                            <div class="radio-option">
                                <input type="radio" id="saleYes" name="saleIntention" value="yes">
                                <label for="saleYes">„ÅØ„ÅÑ„ÄÅÂ£≤Âç¥‰∫àÂÆö„Åå„ÅÇ„Çä„Åæ„Åô</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="saleNo" name="saleIntention" value="no">
                                <label for="saleNo">„ÅÑ„ÅÑ„Åà„ÄÅÂ£≤Âç¥‰∫àÂÆö„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì</label>
                            </div>
                            <div class="radio-option">
                                <input type="radio" id="saleUndecided" name="saleIntention" value="undecided">
                                <label for="saleUndecided">„Åæ„Å†Êú™ÂÆö„Åß„Åô</label>
                            </div>
                        </div>
                        <div class="form-error" id="saleIntentionError"></div>
                    </div>

                    <div class="form-group" id="saleDetailsGroup" style="display: none;">
                        <label class="form-label">Â£≤Âç¥‰∫àÂÆöÊôÇÊúü</label>
                        <select class="form-select" id="saleSchedule">
                            <option value="">Â£≤Âç¥ÊôÇÊúü„ÇíÈÅ∏Êäû</option>
                            <option value="3months">3„É∂Êúà‰ª•ÂÜÖ</option>
                            <option value="6months">6„É∂Êúà‰ª•ÂÜÖ</option>
                            <option value="1year">1Âπ¥‰ª•ÂÜÖ</option>
                            <option value="2years">2Âπ¥‰ª•ÂÜÖ</option>
                            <option value="flexible">ÊôÇÊúü„ÅØÊüîËªü„Å´ÂØæÂøúÂèØËÉΩ</option>
                        </select>
                    </div>
                </div>

                <!-- „Éï„Ç©„Éº„É†„Ç¢„ÇØ„Ç∑„Éß„É≥ -->
                <div class="form-actions">
                    <div class="form-actions-left">
                        <button type="button" class="btn btn-secondary" onclick="window.location.href='index.html'">
                            „Ç≠„É£„É≥„Çª„É´
                        </button>
                        <button type="button" class="btn btn-secondary" onclick="resetForm()">
                            „É™„Çª„ÉÉ„Éà
                        </button>
                    </div>
                    <div class="form-actions-right">
                        <button type="button" class="btn btn-secondary" onclick="saveDraft()">
                            ‰∏ãÊõ∏„Åç‰øùÂ≠ò
                        </button>
                        <button type="submit" class="btn btn-primary">
                            Ë¶ãÂ≠¶‰∫àÁ¥Ñ„ÇíÁôªÈå≤
                        </button>
                    </div>
                </div>
            </form>
        </main>
    </div>

    <script>
        // Áâ©‰ª∂„Éá„Éº„ÇøÔºàÂÆüÈöõ„ÅÆÂÆüË£Ö„Åß„ÅØ API „Åã„ÇâÂèñÂæóÔºâ
        const propertyData = {
            house: [
                {
                    id: 'H001',
                    name: '„É¢„ÉÄ„É≥„Éè„Ç¶„ÇπÊñ∞ÂÆø',
                    address: 'Êù±‰∫¨ÈÉΩÊñ∞ÂÆøÂå∫Ë•øÊñ∞ÂÆø1-1-1',
                    price: '4,800‰∏áÂÜÜ',
                    area: 'Âª∂Â∫äÈù¢Á©çÔºö120„é°',
                    age: '2024Âπ¥3ÊúàÁØâ'
                },
                {
                    id: 'H002', 
                    name: '„Ç®„Ç≥„Éè„Ç¶„ÇπÊ∏ãË∞∑',
                    address: 'Êù±‰∫¨ÈÉΩÊ∏ãË∞∑Âå∫Ê∏ãË∞∑2-2-2',
                    price: '5,200‰∏áÂÜÜ',
                    area: 'Âª∂Â∫äÈù¢Á©çÔºö135„é°',
                    age: '2024Âπ¥1ÊúàÁØâ'
                },
                {
                    id: 'H003',
                    name: '„Éï„Ç°„Éü„É™„Éº„Éè„Ç¶„ÇπÊ±†Ë¢ã',
                    address: 'Êù±‰∫¨ÈÉΩË±äÂ≥∂Âå∫Ê±†Ë¢ã3-3-3',
                    price: '4,200‰∏áÂÜÜ',
                    area: 'Âª∂Â∫äÈù¢Á©çÔºö110„é°',
                    age: '2024Âπ¥5ÊúàÁØâ'
                }
            ],
            land: [
                {
                    id: 'L001',
                    name: 'Êñ∞ÂÆøÈßÖÂâçÂúüÂú∞',
                    address: 'Êù±‰∫¨ÈÉΩÊñ∞ÂÆøÂå∫Êñ∞ÂÆø4-4-4',
                    price: '3,500‰∏áÂÜÜ',
                    area: 'ÂúüÂú∞Èù¢Á©çÔºö80„é°',
                    age: '-'
                },
                {
                    id: 'L002',
                    name: '‰∏ñÁî∞Ë∞∑‰ΩèÂÆÖÁî®Âú∞',
                    address: 'Êù±‰∫¨ÈÉΩ‰∏ñÁî∞Ë∞∑Âå∫‰∏ñÁî∞Ë∞∑5-5-5',
                    price: '4,800‰∏áÂÜÜ',
                    area: 'ÂúüÂú∞Èù¢Á©çÔºö120„é°',
                    age: '-'
                },
                {
                    id: 'L003',
                    name: '‰∏≠ÈáéÂå∫ÁîªÊï¥ÁêÜÂú∞',
                    address: 'Êù±‰∫¨ÈÉΩ‰∏≠ÈáéÂå∫‰∏≠Èáé6-6-6',
                    price: '3,200‰∏áÂÜÜ',
                    area: 'ÂúüÂú∞Èù¢Á©çÔºö95„é°',
                    age: '-'
                }
            ]
        };

        // Áâ©‰ª∂„Çø„Ç§„ÉóÂ§âÊõ¥ÊôÇ„ÅÆÂá¶ÁêÜ
        function handlePropertyTypeChange() {
            const propertyType = document.getElementById('propertyType').value;
            const propertyNameSelect = document.getElementById('propertyName');
            const landSaleSection = document.getElementById('landSaleSection');
            
            // Áâ©‰ª∂ÂêçÈÅ∏ÊäûËÇ¢„Çí„ÇØ„É™„Ç¢
            propertyNameSelect.innerHTML = '<option value="">Áâ©‰ª∂„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>';
            
            if (propertyType) {
                // ÈÅ∏Êäû„Åï„Çå„ÅüÁâ©‰ª∂„Çø„Ç§„Éó„Å´Âøú„Åò„Å¶Áâ©‰ª∂„ÇíË°®Á§∫
                const properties = propertyData[propertyType];
                properties.forEach(property => {
                    const option = document.createElement('option');
                    option.value = property.id;
                    option.textContent = property.name;
                    propertyNameSelect.appendChild(option);
                });

                // ÂúüÂú∞„ÅÆÂ†¥Âêà„ÅØÂ£≤Âç¥‰∫àÂÆö„Çª„ÇØ„Ç∑„Éß„É≥„ÇíË°®Á§∫
                if (propertyType === 'land') {
                    landSaleSection.style.display = 'block';
                } else {
                    landSaleSection.style.display = 'none';
                }
            } else {
                propertyNameSelect.innerHTML = '<option value="">„Åæ„ÅöÁâ©‰ª∂„Çø„Ç§„Éó„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ</option>';
                landSaleSection.style.display = 'none';
            }

            // Áâ©‰ª∂Ë©≥Á¥∞„ÇíÈùûË°®Á§∫
            document.getElementById('propertyDetails').style.display = 'none';
        }

        // Áâ©‰ª∂ÈÅ∏ÊäûÊôÇ„ÅÆÂá¶ÁêÜ
        document.getElementById('propertyName').addEventListener('change', function() {
            const propertyId = this.value;
            const propertyType = document.getElementById('propertyType').value;
            const propertyDetails = document.getElementById('propertyDetails');
            
            if (propertyId && propertyType) {
                const property = propertyData[propertyType].find(p => p.id === propertyId);
                if (property) {
                    document.getElementById('selectedPropertyTitle').textContent = property.name;
                    document.getElementById('propertyAddress').textContent = property.address;
                    document.getElementById('propertyPrice').textContent = property.price;
                    document.getElementById('propertyArea').textContent = property.area;
                    document.getElementById('propertyAge').textContent = property.age;
                    
                    propertyDetails.style.display = 'block';
                }
            } else {
                propertyDetails.style.display = 'none';
            }
        });

        // Âà©Áî®ÂèØËÉΩÊôÇÈñì„Çπ„É≠„ÉÉ„Éà„ÅÆË™≠„ÅøËæº„Åø
        function loadAvailableTimeSlots() {
            const tourDate = document.getElementById('tourDate').value;
            const timeSlotsContainer = document.getElementById('timeSlots');
            
            if (!tourDate) {
                timeSlotsContainer.innerHTML = '';
                return;
            }

            // 15ÂàÜÂçò‰Ωç„ÅÆÊôÇÈñì„Çπ„É≠„ÉÉ„Éà„ÇíÁîüÊàêÔºà9:00-18:00Ôºâ
            const timeSlots = [];
            for (let hour = 9; hour < 18; hour++) {
                for (let minute = 0; minute < 60; minute += 15) {
                    const timeString = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;
                    timeSlots.push(timeString);
                }
            }

            // ‰∫àÁ¥ÑÊ∏à„Åø„ÅÆÊôÇÈñìÔºàÂÆüÈöõ„ÅÆÂÆüË£Ö„Åß„ÅØ API „Åã„ÇâÂèñÂæóÔºâ
            const unavailableSlots = ['10:00', '14:30', '16:15'];

            timeSlotsContainer.innerHTML = '';
            timeSlots.forEach(time => {
                const slotElement = document.createElement('div');
                slotElement.className = 'time-slot';
                slotElement.textContent = time;
                
                if (unavailableSlots.includes(time)) {
                    slotElement.classList.add('unavailable');
                    slotElement.textContent += ' (‰∫àÁ¥ÑÊ∏à)';
                } else {
                    slotElement.addEventListener('click', function() {
                        // Êó¢ÈÅ∏Êäû„ÅÆÊôÇÈñì„Çπ„É≠„ÉÉ„Éà„ÇíËß£Èô§
                        document.querySelectorAll('.time-slot').forEach(slot => {
                            slot.classList.remove('selected');
                        });
                        
                        // Êñ∞„Åó„ÅèÈÅ∏Êäû
                        this.classList.add('selected');
                        document.getElementById('selectedTimeSlot').value = time;
                    });
                }
                
                timeSlotsContainer.appendChild(slotElement);
            });
        }

        // ÈõÜÂêàÂ†¥ÊâÄÂ§âÊõ¥ÊôÇ„ÅÆÂá¶ÁêÜ
        document.getElementById('meetingPoint').addEventListener('change', function() {
            const otherMeetingPoint = document.getElementById('otherMeetingPoint');
            if (this.value === 'other') {
                otherMeetingPoint.style.display = 'block';
                document.getElementById('meetingPointDetail').required = true;
            } else {
                otherMeetingPoint.style.display = 'none';
                document.getElementById('meetingPointDetail').required = false;
            }
        });

        // Â£≤Âç¥‰∫àÂÆö„É©„Ç∏„Ç™„Éú„Çø„É≥Â§âÊõ¥ÊôÇ„ÅÆÂá¶ÁêÜ
        document.querySelectorAll('input[name="saleIntention"]').forEach(radio => {
            radio.addEventListener('change', function() {
                const saleDetailsGroup = document.getElementById('saleDetailsGroup');
                if (this.value === 'yes') {
                    saleDetailsGroup.style.display = 'block';
                } else {
                    saleDetailsGroup.style.display = 'none';
                }
            });
        });

        // ‰ΩèÊâÄÊ§úÁ¥¢
        function searchAddress() {
            const zipCode = document.getElementById('zipCode').value;
            if (zipCode) {
                // ÂÆüÈöõ„ÅÆÂÆüË£Ö„Åß„ÅØÈÉµ‰æøÁï™Âè∑ API „ÇíÂëº„Å≥Âá∫„Åô
                console.log('Searching address for zip code:', zipCode);
                alert('‰ΩèÊâÄÊ§úÁ¥¢Ê©üËÉΩ„ÅØÂÆüË£Ö‰∫àÂÆö„Åß„Åô');
            } else {
                alert('ÈÉµ‰æøÁï™Âè∑„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
            }
        }

        // ‰∏ãÊõ∏„Åç‰øùÂ≠ò
        function saveDraft() {
            console.log('Saving draft...');
            alert('‰∏ãÊõ∏„Åç„Çí‰øùÂ≠ò„Åó„Åæ„Åó„Åü');
        }

        // „Éó„É¨„Éì„É•„Éº
        function previewReservation() {
            const propertyName = document.getElementById('propertyName').selectedOptions[0]?.textContent || '';
            const tourDate = document.getElementById('tourDate').value;
            const timeSlot = document.getElementById('selectedTimeSlot').value;
            const customerName = `${document.getElementById('lastName').value} ${document.getElementById('firstName').value}`;
            
            if (propertyName && tourDate && timeSlot && customerName.trim() !== ' ') {
                alert(`„Éó„É¨„Éì„É•„Éº\nÁâ©‰ª∂: ${propertyName}\nÊó•ÊôÇ: ${tourDate} ${timeSlot}\n„ÅäÂÆ¢Êßò: ${customerName}`);
            } else {
                alert('ÂøÖË¶Å„Å™ÊÉÖÂ†±„ÇíÂÖ•Âäõ„Åó„Å¶„Åã„Çâ„Éó„É¨„Éì„É•„Éº„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
            }
        }

        // „Éï„Ç©„Éº„É†„É™„Çª„ÉÉ„Éà
        function resetForm() {
            if (confirm('ÂÖ•ÂäõÂÜÖÂÆπ„Çí„Åô„Åπ„Å¶„É™„Çª„ÉÉ„Éà„Åó„Åæ„Åô„ÅãÔºü')) {
                document.getElementById('tourReservationForm').reset();
                document.getElementById('propertyDetails').style.display = 'none';
                document.getElementById('landSaleSection').style.display = 'none';
                document.getElementById('otherMeetingPoint').style.display = 'none';
                document.getElementById('saleDetailsGroup').style.display = 'none';
                document.getElementById('timeSlots').innerHTML = '';
                document.getElementById('selectedTimeSlot').value = '';
            }
        }

        // „Éï„Ç©„Éº„É†ÈÄÅ‰ø°
        document.getElementById('tourReservationForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // „Éê„É™„Éá„Éº„Ç∑„Éß„É≥
            if (validateForm()) {
                if (confirm('Ë¶ãÂ≠¶‰∫àÁ¥Ñ„ÇíÁôªÈå≤„Åó„Åæ„Åô„ÅãÔºü')) {
                    console.log('Registering tour reservation...');
                    alert('Ë¶ãÂ≠¶‰∫àÁ¥Ñ„ÇíÁôªÈå≤„Åó„Åæ„Åó„Åü');
                    // ÊàêÂäüÊôÇ„ÅØ‰∏ÄË¶ß„Éö„Éº„Ç∏„Å´Êàª„ÇãÔºàÂÆüË£ÖÊôÇ„ÅØÈÅ©Âàá„Å™„Éö„Éº„Ç∏„Å´Ôºâ
                    window.location.href = 'index.html';
                }
            }
        });

        // „Éê„É™„Éá„Éº„Ç∑„Éß„É≥
        function validateForm() {
            let isValid = true;
            const required = ['propertyType', 'propertyName', 'tourDate', 'meetingPoint', 
                            'lastName', 'firstName', 'lastNameKana', 'firstNameKana', 'email', 'phone'];
            
            // ÂøÖÈ†àÈ†ÖÁõÆ„ÉÅ„Çß„ÉÉ„ÇØ
            required.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                const errorElement = document.getElementById(fieldId + 'Error');
                
                if (!field.value.trim()) {
                    field.classList.add('error');
                    if (errorElement) {
                        errorElement.textContent = '„Åì„ÅÆÈ†ÖÁõÆ„ÅØÂøÖÈ†à„Åß„Åô';
                    }
                    isValid = false;
                } else {
                    field.classList.remove('error');
                    if (errorElement) {
                        errorElement.textContent = '';
                    }
                }
            });

            // ÊôÇÈñì„Çπ„É≠„ÉÉ„ÉàÈÅ∏Êäû„ÉÅ„Çß„ÉÉ„ÇØ
            const timeSlot = document.getElementById('selectedTimeSlot');
            const timeSlotError = document.getElementById('timeSlotError');
            if (!timeSlot.value) {
                timeSlotError.textContent = 'Ë¶ãÂ≠¶ÊôÇÈñì„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ';
                isValid = false;
            } else {
                timeSlotError.textContent = '';
            }

            // ÂúüÂú∞„ÅÆÂ†¥Âêà„ÅÆÂ£≤Âç¥‰∫àÂÆö„ÉÅ„Çß„ÉÉ„ÇØ
            const propertyType = document.getElementById('propertyType').value;
            if (propertyType === 'land') {
                const saleIntention = document.querySelector('input[name="saleIntention"]:checked');
                const saleError = document.getElementById('saleIntentionError');
                if (!saleIntention) {
                    saleError.textContent = '„Åì„ÅÆÈ†ÖÁõÆ„ÅØÂøÖÈ†à„Åß„Åô';
                    isValid = false;
                } else {
                    saleError.textContent = '';
                }
            }

            return isValid;
        }

        // „É™„Ç¢„É´„Çø„Ç§„É†„Éê„É™„Éá„Éº„Ç∑„Éß„É≥
        document.addEventListener('DOMContentLoaded', function() {
            const requiredFields = ['propertyType', 'propertyName', 'tourDate', 'meetingPoint',
                                  'lastName', 'firstName', 'lastNameKana', 'firstNameKana', 'email', 'phone'];
            
            requiredFields.forEach(fieldId => {
                const field = document.getElementById(fieldId);
                if (field) {
                    field.addEventListener('blur', function() {
                        validateField(fieldId);
                    });
                }
            });
        });

        function validateField(fieldId) {
            const field = document.getElementById(fieldId);
            const errorElement = document.getElementById(fieldId + 'Error');
            
            if (!field.value.trim()) {
                field.classList.add('error');
                if (errorElement) {
                    errorElement.textContent = '„Åì„ÅÆÈ†ÖÁõÆ„ÅØÂøÖÈ†à„Åß„Åô';
                }
            } else {
                field.classList.remove('error');
                if (errorElement) {
                    errorElement.textContent = '';
                }
            }
        }
    </script>
</body>
</html>